#:kivy 1.8.0 

#:import all_months calendar.month_name

<OrganMain>:
    CalTab:

<CalTab>:
    id: caltab
    date_in_view: calview.date_in_view
    BoxLayout:
        canvas:
            Color:
                rgba: .7, 1, 1, .7
            Rectangle:
                pos: self.pos
                size: self.size
        orientation: 'vertical'
        padding: 20, 10, 20, 10
        BoxLayout:
            size_hint: 1, .1
            orientation: 'horizontal'
            # spacing: self.width /8
            Button:
                size_hint: .6, 1
                font_size: sum(self.parent.size)/20
                background_color: 0,0,0,0
                bold: True
                color: 0,0,0, 0.8
                text_size: self.size
                valign: 'middle'
                text: calview.header
                on_release: root.choose_date()
            Button:
                size_hint: .4, 1
                background_color: 0,0,0,0
                font_size: sum(self.parent.size)/30
                text_size: self.size
                valign: 'middle'
                halign: 'right'
                color: 0,0,0,1
                text: root.rightnow.strftime('%A %d %B')
                on_release: root.go_today()
        CalView:
            id: calview

<CalView>:
    orientation: 'vertical'
    BoxLayout:
        size_hint: 1, .1
        id: weekheader
        canvas:
            Color:
                rgba: 0,0,0,1
            Rectangle:
                size: self.size
                pos: self.pos
        padding: 3,3,3,3
        spacing: 3
        size_hint: 1, .1

<YearWidget>:
    cols: 4

<GoToDaTe>:
    padding: 100,200,100,200
    title: 'Choose date'
    title_align: 'center'
    separator_color: 0,0,0,0
    BoxLayout:
        padding: 20, 20,20,20
        Spinner:
            id: month
            size_hint: 0.5, 1
            values: all_months[1:]
        Spinner:
            id: year
            size_hint: 0.5, 1
            values: ('ok','not okay')


<DayPopup>:
    hour: hour
    minute: minute
    subject: subject
    canvas.before:
        Rectangle:
            source: 'data/organ_background.png'
            pos: self.pos
            size: self.size
    size_hint: .7, .7
    BoxLayout:
        spacing: self.height / 20
        padding: 20,20,20,20
        orientation: 'vertical'
        BoxLayout:
            size_hint: 1, .2
            BoxLayout:
                orientation: 'vertical'
                Label:
                    text: 'Start at:'
                BoxLayout:
                    padding: self.width/2.75, 0, 0, 0
                    HourMemoInput:
                        minute: minute
                        id: hour
                        input_type: 'number'
                    Label:
                        size_hint: None, 1
                        width: self.texture_size[0]
                        text: ":"
                    MinMemoInput:
                        hour: hour
                        id: minute
                        input_type: 'number'
            BoxLayout:
                padding: self.width/4, 0, self.width/4, 0
                orientation: 'vertical'
                Label:
                    text: 'Last for:'
                Spinner:
                    values: ('10m', '20m', '30m', '40m', '50m', '60m')
        BoxLayout:
            size_hint: 1, .7
            orientation: 'vertical'
            spacing: self.height/10
            BoxLayout:
                size_hint: 1, .3
                orientation: 'vertical'
                Label:
                    size_hint: 1, .1
                    bold: True
                    text: "Subject:"
                TextInput:
                    size_hint: 1, .9
                    id: subject
                    multiline: False
                    size_hint: 1, .2
            BoxLayout:
                orientation: 'vertical'
                Label:
                    size_hint: 1, .1
                    bold: True
                    text: "Notes:"
                TextInput:
                    id: notes
                    sizehint: 1, .9
        BoxLayout:
            size_hint: 1, .1
            spacing: self.width/100
            padding: self.width/3.5, 0, 0, 0
            Button:
                size_hint: None, 1
                text: 'Save'
                width: self.parent.width/5
                on_release: root.save()
            Button:
                size_hint: None, 1
                text: 'Cancel'
                width: self.parent.width/5
                on_release: root.dismiss()


<HourMemoInput,MinMemoInput>:
    width: self.parent.x/5
    size_hint: None, 1
    multiline: False


<WeekDayHeader>:
    canvas.before:
        Color:
            rgba: 1, 1, 1, 0.7
        Rectangle:
            pos: self.pos
            size: self.size
    bold: True
    font_size: sum(self.size)/7
    color: 0,0,0,1

<MonthView>:
    cols: 7
    rows: 6
    spacing: 3
    canvas:
        Color:
            rgba: 0,0,0,1
        Rectangle:
            pos: self.pos
            size: self.size

<DayWidget>:
    canvas.before:
        Color:
            rgba: self.daycolor
        Rectangle:
            size: self.size
            pos: self.pos
    font_size: sum(self.size)/8
    color: 0,0,0,1
    bold: True
    size: self.size
    pos: self.pos
    # text: str(self.day)
    # Label:
    #     text: "!"
    #     pos: self.parent.x - 10, self.parent.y - 10
