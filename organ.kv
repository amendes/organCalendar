#:kivy 1.8.0 

#:import all_months calendar.month_name


<OrganCalendar>:
    cal: app.cal
    id: caltab
    date_in_view: calview.date_in_view
    BoxLayout:
        canvas:
            Color:
                rgba: .7, 1, 1, .7
            Rectangle:
                pos: self.pos
                size: self.size
        orientation: 'vertical'
        padding: 20, 10, 20, 10
        BoxLayout:
            size_hint: 1, .1
            orientation: 'horizontal'
            # spacing: self.width /8
            Button:
                size_hint: .6, 1
                font_size: sum(self.parent.size)/20
                background_color: 0,0,0,0
                bold: True
                color: 0,0,0, 0.8
                text_size: self.size
                valign: 'middle'
                text: calview.header
                on_release: root.choose_date()
            Button:
                text: 'GO YEAR'
                on_release: root.go_year()
            Button:
                size_hint: .4, 1
                background_color: 0,0,0,0
                font_size: sum(self.parent.size)/30
                text_size: self.size
                valign: 'middle'
                halign: 'right'
                color: 0,0,0,1
                text: app.rightnow.strftime('%A %d %B')
                on_release: root.goto_date()
        CalView:
            id: calview

<CalView>:
    rightnow: app.rightnow
    orientation: 'vertical'
    BoxLayout:
        size_hint: 1, .1
        id: weekheader
        canvas:
            Color:
                rgba: 0,0,0,1
            Rectangle:
                size: self.size
                pos: self.pos
        padding: 3,3,3,3
        spacing: 3
        size_hint: 1, .1

<YearWidget>:
    cal: app.cal
    cols: 4

<GoToDaTe>:
    month: month
    year: year
    # padding: 100,200,100,200
    title: 'Choose date'
    title_align: 'center'
    separator_color: 0,0,0,0
    BoxLayout:
        size_hint: .5, .5
        padding: 20, 20,20,20
        Spinner:
            id: month
            size_hint: 0.4, 1
            values: all_months[1:]
        Spinner:
            id: year
            size_hint: 0.4, 1
            values: ('ok','not okay')
        Button:
            size_hint: 0.2, 1
            text: 'GO'
            on_release: root.goto_date()



<DayPopup>:
    memos: app.memos
    hour: hour
    subject: subject
    notes: notes
    size_hint: .8, .8
    BoxLayout:
        spacing: self.height / 20
        padding: 20,20,20,20
        orientation: 'vertical'
        BoxLayout:
            size_hint: 1, .2
            BoxLayout:
                orientation: 'vertical'
                Label:
                    id: hourlabel
                    # canvas.before:
                    #     Color:
                    #         rgba: 1,0,0,1
                    #     Rectangle:
                    #         pos: self.pos
                    #         size: self.size
                    text: 'Start at'
                HourInput:
                    pos_hint: {'center_x': .5}
                    size_hint: None, 1
                    size: hourlabel.texture_size
                    subject: subject
                    id: hour
            BoxLayout:
                padding: self.width/4, 0, self.width/4, 0
                orientation: 'vertical'
                Label:
                    text: 'Last for'
                Spinner:
                    pos_hint: {'center_x': .5}
                    size_hint: None, 1
                    # size_x: self.parent.width / 100
                    values: ('10m', '20m', '30m', '40m', '50m', '60m')
        BoxLayout:
            size_hint: 1, .7
            orientation: 'vertical'
            spacing: self.height/10
            BoxLayout:
                size_hint: 1, .3
                orientation: 'vertical'
                padding: self.width/10, 0, self.width/10, 0
                Label:
                    size_hint: 1, .1
                    bold: True
                    text: "Subject:"
                TextInput:
                    size_hint: 1, .9
                    id: subject
                    multiline: False
                    size_hint: 1, .2
            BoxLayout:
                orientation: 'vertical'
                Label:
                    size_hint: 1, .1
                    bold: True
                    text: "Notes:"
                TextInput:
                    id: notes
                    sizehint: 1, .9
        BoxLayout:
            size_hint: 1, .1
            spacing: self.width/100
            padding: self.width/3.5, 0, 0, 0
            Button:
                size_hint: None, 1
                text: 'Save'
                font_size: sum(self.size)/5
                width: self.parent.width/5
                on_release: root.save()
            Button:
                size_hint: None, 1
                text: 'Cancel'
                font_size: sum(self.size)/5
                width: self.parent.width/6
                on_release: root.dismiss()


<HourInput>:
    # input_filter: 'int'
    # width: 30
    # size_hint: None, 1
    multiline: False


<WeekDayHeader>:
    canvas.before:
        Color:
            rgba: 1, 1, 1, 0.7
        Rectangle:
            pos: self.pos
            size: self.size
    bold: True
    font_size: sum(self.size)/7
    color: 0,0,0,1

<MonthView>:
    cal: app.cal
    rightnow: app.rightnow
    cols: 7
    rows: 6
    spacing: 3
    canvas:
        Color:
            rgba: 0,0,0,1
        Rectangle:
            pos: self.pos
            size: self.size

<DayWidget>:
    canvas.before:
        Color:
            rgba: self.daycolor
        Rectangle:
            size: self.size
            pos: self.pos
    font_size: sum(self.size)/8
    color: 0,0,0,1
    bold: True
    size: self.size
    pos: self.pos
    # text: str(self.day)
    # Label:
    #     text: "!"
    #     pos: self.parent.x - 10, self.parent.y - 10

<YearWidget>:
    cols: 3
    row: 4
